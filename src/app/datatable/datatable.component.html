<form>
  <div class="dtable-content">
    <mat-drawer-container class="toolbox-container" autosize>
      <div class="input-grid">
        <div class="header-row" [ngClass]="{'toolbox-open': drawerIsOpen}">
          <div class="tools-header">
          </div>
          <button mat-flat-button type="button" (click)="drawer.toggle()" class="tools-button">
            <mat-icon *ngIf="drawerIsOpen">close</mat-icon>
            <mat-icon *ngIf="!drawerIsOpen">build</mat-icon>
          </button> 
        </div>
        <div class="input-rows" *ngFor="let inputRow of inputObject.rows" [style]="'grid-template-columns: repeat(' + cellManagement.currentStepCount + ', 1fr) 65px' | safe: 'style'">
          <div class="input-cell" *ngFor="let step of inputRow.steps; index as i" [style]="step.style + step.startColumn + ' / ' + step.endColumn | safe: 'style'" [ngClass]="{'ancestor-cell': i !== inputRow.steps.length - 1}">
            <span class="cell-label">{{step.postStep}}</span>
            <mat-icon class="cell-icon" *ngIf="step.stepIcon">{{step.stepIcon}}</mat-icon>
          </div>
          <div class="tools-column">
            <mat-menu #cleanseMenu="matMenu" yPosition="below" xPosition="before" class="cleanse-menu">
              <button
                *ngFor="let cleanseOption of inputRow.cleanseOperations; index as c"
                mat-menu-item
                [matTooltip]="tooltipObj.cleanseTooltip[cleanseOption.name]"
                matTooltipPosition="left"
                [matTooltipClass]="{'toolbox-tooltip cleanse-tooltip': true}"
                (click)="applyCleanse(cleanseOption.name, inputRow.id)"
                [disabled]="cleanseOption.isApplied">
                <mat-icon [ngClass]="{'cleanse-option-disabled': cleanseOption.isApplied}">{{cleanseOption.icon}}</mat-icon>
              </button>
            </mat-menu>
            <button mat-icon-button [matMenuTriggerFor]="cleanseMenu">
              <mat-icon>more_vert</mat-icon>
            </button>
          </div>
        </div>
      </div>
      <mat-drawer
        #drawer
        class="toolbox-sidenav"
        mode="side"
        position="end"
        (openedStart)="drawerChanged(true)"
        (closedStart)="drawerChanged(false)">
        <div class="dtable-header toolbox-controls">
          <button
            mat-flat-button
            class="toolbox-control"
            (click)="openDialog()"
            #tooltip="matTooltip"
            [matTooltip]="tooltipObj.functionTooltip.general"
            matTooltipPosition="left"
            [matTooltipClass]="{'toolbox-tooltip cleanse-tooltip': true}">
            <mat-icon>functions</mat-icon>
          </button> 
          <!-- (click)="setColumns(inputColumns.length + 1)" -->
          <button
            mat-flat-button 
            class="toolbox-control"
            #tooltip="matTooltip"
            [matTooltip]="tooltipObj.decisionTable.general"
            matTooltipPosition="left"
            [matTooltipClass]="{'toolbox-tooltip cleanse-tooltip': true}">
            <mat-icon>call_split</mat-icon>
          </button>
        </div>
      </mat-drawer>
    </mat-drawer-container>
    <div class="output-grid">
      <div class="dtable-header"></div>
      <div *ngFor="let outputRow of outputRows" class="output-row">
        <div class="output-cell">
          <input class="output-cell name" type="text" value="{{ outputRow.name }}" readonly>
        </div>
      </div>
    </div>
  </div>
</form>
